// API Test Requests
// Base URL: http://localhost:8080
// API Prefix: /api/v1

// ============================================
// Base API
// ============================================

// Ping
GET http://localhost:8080/api/v1/ping

// ============================================
// User API
// ============================================

###

// User Login
POST http://localhost:8080/api/v1/user/login
Content-Type: application/json

{
  "username": "admin",
  "password": "123456"
}
> {%
  client.global.set("token", response.body.data.token);
%}

###

// User Logout
POST http://localhost:8080/api/v1/user/logout
Content-Type: application/json

{
  "username": "admin"
}

###

// Create User
POST http://localhost:8080/api/v1/user/create
Content-Type: application/json

{
  "username": "admin",
  "password": "123456",
  "nickname": "管理员",
  "department": "技术部"
}
> {%
  client.global.set("user_id", response.body.data.id);
  client.global.set("username", response.body.data.username);
%}

###
// ============================================
// Category API (需要 JWT)
// ============================================

###

// Create Category
POST http://localhost:8080/api/v1/category/create
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "id": "1",
  "title": "文案生成",
  "icon": "file",
  "url": "/category/copywriting",
  "createdBy": "admin",
  "username": "管理员"
}
> {%
  client.global.set("category_id", response.body.data.id);
%}

###

// Get Category by ID
GET http://localhost:8080/api/v1/category/info/{{category_id}}
Authorization: Bearer {{token}}

###

// List Categories
GET http://localhost:8080/api/v1/category/list
Authorization: Bearer {{token}}

###

// Update Category
POST http://localhost:8080/api/v1/category/update
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "id": "{{category_id}}",
  "title": "数据挖掘",
  "icon": "database",
  "count": 10,
  "url": "/category/data-mining",
  "createdBy": "admin",
  "username": "管理员"
}

###

// Delete Category
POST http://localhost:8080/api/v1/category/delete/{{category_id}}
Authorization: Bearer {{token}}

// ============================================
// Prompt API (需要 JWT)
// ============================================

###

// Create Prompt
POST http://localhost:8080/api/v1/prompt/create
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "name": "文案生成助手",
  "createdBy": "admin",
  "username": "管理员",
  "path": "/copywriting",
  "category": "1"
}
> {%
  client.global.set("prompt_id", response.body.data.id);
  client.global.set("prompt_path", response.body.data.path);
%}

###

// Get Prompt by ID
GET http://localhost:8080/api/v1/prompt/info/{{prompt_id}}
Authorization: Bearer {{token}}

###

// Get Prompt Content (published version)
GET http://localhost:8080/api/v1/prompt/content{{prompt_path}}
Authorization: Bearer {{token}}

###

// Update Prompt
POST http://localhost:8080/api/v1/prompt/update
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "id": "{{prompt_id}}",
  "name": "更新后的提示词",
  "isPublish": false,
  "category": "2"
}

###

// Delete Prompt
POST http://localhost:8080/api/v1/prompt/delete/{{prompt_id}}
Authorization: Bearer {{token}}

###

// List Prompts
GET http://localhost:8080/api/v1/prompt/list?offset=0&limit=10
Authorization: Bearer {{token}}

// ============================================
// Favorites API (需要 JWT)
// ============================================

###

// Add to Favorites
POST http://localhost:8080/api/v1/favorites/add
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "promptId": "{{prompt_id}}"
}

###

// Check if Favorite
POST http://localhost:8080/api/v1/favorites/check
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "promptId": "{{prompt_id}}"
}

###

// List Favorites
GET http://localhost:8080/api/v1/favorites/list?offset=0&limit=10
Authorization: Bearer {{token}}

###

// Remove from Favorites
POST http://localhost:8080/api/v1/favorites/remove
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "promptId": "{{prompt_id}}"
}

###

// ============================================
// Recently Used API (需要 JWT)
// ============================================

###

// Record Usage
POST http://localhost:8080/api/v1/recently-used/record
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "promptId": "{{prompt_id}}"
}

###

// List Recently Used
GET http://localhost:8080/api/v1/recently-used/list?offset=0&limit=10
Authorization: Bearer {{token}}

###

// Remove from Recently Used
POST http://localhost:8080/api/v1/recently-used/remove
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "promptId": "{{prompt_id}}"
}

###

// Clean Old Records
POST http://localhost:8080/api/v1/recently-used/clean
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "keepCount": 20
}

###

// ============================================
// Prompt Version API (需要 JWT)
// ============================================

###

// Create Prompt Version
POST http://localhost:8080/api/v1/version/create
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "promptId": "{{prompt_id}}",
  "version": "1.0.0",
  "content": "你是一个专业的文案生成助手...",
  "variables": "[\"topic\", \"tone\"]",
  "changeLog": "初始版本",
  "createdBy": "admin",
  "username": "管理员",
  "isPublish": true
}
> {%
  client.global.set("version_id", response.body.data.id);
%}

###

// Get Version by ID
GET http://localhost:8080/api/v1/version/info/{{version_id}}
Authorization: Bearer {{token}}

###

// Get Versions by Prompt ID
GET http://localhost:8080/api/v1/version/prompt/{{prompt_id}}
Authorization: Bearer {{token}}

###

// Get Latest Version by Prompt ID
GET http://localhost:8080/api/v1/version/prompt/{{prompt_id}}/latest
Authorization: Bearer {{token}}

###

// Update Version
POST http://localhost:8080/api/v1/version/update
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "id": "{{version_id}}",
  "version": "1.1.0",
  "content": "更新后的提示词内容...",
  "variables": "[\"topic\", \"tone\", \"audience\"]",
  "changeLog": "优化提示词",
  "isPublish": true
}

###

// Delete Version
POST http://localhost:8080/api/v1/version/delete/{{version_id}}
Authorization: Bearer {{token}}

###

// List Versions
GET http://localhost:8080/api/v1/version/list?offset=0&limit=10
Authorization: Bearer {{token}}
